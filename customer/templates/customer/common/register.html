{% extends "base.html" %}
{% load static %}
{% block title %}eshop-欢迎注册{% endblock %}
{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/form.css' %}">
{% endblock %}
{% block body %}
    <div class="wrapper bg-white">
        <div id="logo">
            <a href="index.html">eshop</a>
            <span>欢迎注册</span>
        </div>
        <div class="logo-right">
            已有账号？<a href="{% url 'customer:login' %}">请登录</a>
        </div>
    </div>
    <div class="wrapper-bottom"></div>
    <div class="content">
        <div class="shadow-box">
            <div class="content-box">
                <form id="registerForm" v-on:submit.prevent="register" style="padding-top:2.8rem;position:absolute">
                    {% csrf_token %}
                    <div class="form-item">
                        <span class="form-item-name">用户名</span>
                        <input name="username" id="username" autocomplete="off" value="" maxlength="30"
                               placeholder="请输入您的用户名" type="text" class="input-box">
                    </div>
                    <div class="form-item">
                        <span class="form-item-name">手机号码</span>
                        <input name="mobile" id="mobile" autocomplete="off" value="" maxlength="11"
                               placeholder="请输入您的手机号码" type="text" class="input-box">
                    </div>
                    <div class="form-item">
                        <span class="form-item-name">邮箱</span>
                        <input name="email" id="email" autocomplete="off" value="" maxlength="30" placeholder="请输入您的邮箱"
                               type="text" class="input-box">
                    </div>
                    <div class="form-item">
                        <span class="form-item-name">登陆密码</span>
                        <input name="password" id="password" maxlength="130" type="password" class="input-box"
                               placeholder="建议至少使用两种字符组合">
                    </div>
                    <div class="form-item">
                        <span class="form-item-name">确认密码</span>
                        <input name="confirm-pwd" id="confirm-pwd" maxlength="130" type="password" class="input-box"
                               placeholder="请再次输入密码">
                    </div>
                    <div class="form-item">
                        <span class="form-item-name">验证码</span>
                        <input v-model="customer.captchaCode" name="verify-code" id="verify-code" autocomplete="off" maxlength="4" placeholder="请输入验证码"
                               type="text" class="input-box" style="width:8rem;margin-right:.3rem">
                        <a v-on:click="updateCaptcha" style="position: absolute" href="javascript:void(0);">
                            <img v-bind:src="captcha.imageUrl" class="img-code" title="点击更换验证码" alt="点击更换验证码"
                                 width="84" height="37">
                        </a>
                        <a v-on:click="updateCaptcha" id="change-code" style="position:relative;left:4.4rem"
                           href="javascript:void(0);">换张图</a>
                    </div>
                    <input type="submit" value="立即注册" class="submit-btn">
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    <script src="{% static "js/js.cookie.js" %}"></script>
    <script src="{% static "js/customer/register.js" %}"></script>
    <script src="{% static "js/jquery-3.1.1.min.js" %}"></script>
    <script src="{% static "lib/layer/layer.js" %}"></script>
    <script>
        $('.submit-btn').on('click',function(){
            layer.open({
                type: 1,
                area: ['15rem', '7.5rem'],
                shadeClose: true, //点击遮罩关闭
                content: '' +
                '<div style="padding-top:1.4rem;font-size:.8rem;text-align:center;line-height:1.2rem">恭喜你，注册成功!' +
                '<br/>2秒后将自动跳转到登录页面</div>'
            });
            setTimeout("window.location='login'",2000);
        });
    </script>
{% endblock %}